#include<stdio.h>
#include<stdlib.h>
#include<malloc.h>

typedef struct SqList{
  int *pData;   //首地址
  int length;   //长度
  int Size;     //容量
}table;

//初始化
void InitList(table *L){
  L->Size = 5;
  L->pData = (int*)malloc(sizeof(int)*L->Size);
  L->length = 0;
}

void InsertList(table *L, int n){
  //判断是否满了
  if(L->Size == L->length){
    //容量变大
    L->Size += 10;
    //申请空间
    int *pTemp = (int*)malloc(sizeof(int)*L->Size);
    //将原数据复制进新空间
    for(int i = 0;i < L->length;i++){
      pTemp[i] = L->pData[i];
    }
    //将原空间释放
    free(L->pData);
    //将数组头指针指向新空间
    L->pData = pTemp;
  }
  //把数据装进去
  L->pData[L->length] = n;
  //已存数量++
  L->length++;
}

int main(void){
  table L;
  
  InitList(&L);
  InsertList(&L, 1);
  InsertList(&L, 2);
  InsertList(&L, 3);
  InsertList(&L, 4);
  InsertList(&L, 5);
  printf("%d, %d\n", L.Size, L.length);
  for(int i = 0;i < L.length;i++){
    printf("%d ", L.pData[i]);
  }
  printf("\n");
  InsertList(&L, 6);
  printf("%d, %d\n", L.Size, L.length);
  for(int i = 0;i < L.length;i++){
    printf("%d ", L.pData[i]);
  }
  printf("\n");
  free(L.pData);
  
  system("pause");
  return 0;
}
